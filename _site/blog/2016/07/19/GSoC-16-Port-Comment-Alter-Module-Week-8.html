<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Anchal - GSoC'16 - Port Comment Alter Module - Week 8</title>
  <meta name="author" content="Anchal" />
  <meta name="description" content="The blog of Anchal" />
  <link rel="canonical" href="https://anchal29.github.io/blog/2016/07/19/GSoC-16-Port-Comment-Alter-Module-Week-8.html" />

  <link href="//fonts.googleapis.com/css?family=Open+Sans:600,800" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="/favicon.png">
  <link rel="alternate" type="application/atom+xml" title="Anchal" href="https://anchal29.github.io/atom.xml" />

  <link rel="stylesheet" href="/assets/css/all.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha256-k2/8zcNbxVIh5mnQ52A0r3a6jAgMGxFJFE2707UxGCk= sha512-ZV9KawG2Legkwp3nAlxLIVFudTauWuBpC10uEafMHYL0Sarrz5A7G79kXh5+5+woxQ5HM559XX2UZjMJ36Wplg==" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <div class="four columns sidebar">
      <nav>
  <h1>Hi.</h1>
  <a href="/">
    
    <img src="/logo.png" id="logo" alt="Blog logo"/>
    
  </a>
  <h2>I'm <a href="/">Anchal</a>.</h2>
  <div id="bio">
    <p style="text-align: center;">Drupal, GSoC and anime</p>
  </div>
  <div id="social">
    Follow me:
<div id="stalker">
  
  <a title="anchal29 on Github" href="https://github.com/anchal29">
    <i class="fa fa-github-square"></i>
  </a>
  

  

  

  

  

  

  
  <a title="Anchal on Facebook" href="https://facebook.com/anchal.pandey.186">
    <i class="fa fa-facebook-square"></i>
  </a>
  

  

  

  

  

  
  <a title="Atom feed" id="atom" href="/atom.xml">
    <i class="fa fa-rss-square"></i>
  </a>
  
</div>

  </div>
</nav>

    </div>

    <div class="eleven columns content">
      <p class="meta">
  July 19, 2016
  <a href="/">
    <i class="home fa fa-home"></i>
  </a>
</p>

<h1 class="title">GSoC'16 - Port Comment Alter Module - Week 8</h1>

<div id="post">
  <hr />

<p>As part of GSoC’16 I’m working on <strong>Porting Comment Alter module to Drupal 8</strong> under the mentorship of <a href="https://www.drupal.org/u/boobaa">boobaa</a> and <a href="https://www.drupal.org/u/czigor">czigor</a>. This blog is an excerpt of the work which I did in the eighth week of the coding period of GSoC’16. The blogpost for the work done in the seventh week can be found <a href="../11/GSoC-16-Port-Comment-Alter-Module-Week-7.html">here</a>.</p>

<p>This week I worked on providing test coverage for the module and fixed some issues. We decided to split the test into multiple classes which would extend one base class. This week I worked on this base class. We are using the entity_test provided by core’s system module for testing purpose instead of any other ContentEntityType so that our tests could be as generic as possible (see <a href="https://github.com/anchal29/comment_alter/commit/d4e502afd17763791ece4ad778b9d8ada7f8b314">commit</a>).</p>

<p>As suggested by czigor we are using <code class="highlighter-rouge">\Drupal\Tests\BrowserTestBase</code> over <code class="highlighter-rouge">\Drupal\simpletest\WebTestBase</code> because the WebTestBase is provided by the simpletest module and they are not PHPUnit-based but built specially for Drupal and soon they will be deprecated (see <a href="https://www.drupal.org/phpunit">phpunit</a>).</p>

<p>To create PHPUnit-based functional test we need to extend the <code class="highlighter-rouge">Drupal\Tests\BrowserTestBase</code>. Test class files should be at <code class="highlighter-rouge">my_module/tests/src/Functional/MyTest.php</code> and the namespace should be <code class="highlighter-rouge">Drupal\Tests\my_module\Functional</code>.</p>

<p>Recently in D7 we came across an issue with the deletion of revision of the parent entity which was causing site failure because we were trying to compare an entity with a NULL value using Diff module. This issue was also addressed for this branch by adding an extra column in our existing schema and then implementing <code class="highlighter-rouge">hook_entity_revision_delete()</code> (see <a href="https://github.com/anchal29/comment_alter/commit/554f521c76124b346f2cf225bb1decf3ac94240b">commit</a>).</p>

<p>So by the end of the week I made some progress with the base test class and also fixed an issue related with the parent_entity_revision_delete. My mentors have already reviewed the code for the work which I did during this week. If anyone is interested, my progress can be followed in my <a href="https://github.com/anchal29/comment_alter">GitHub repo</a>.</p>


</div>


<div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'anchal29';
        var disqus_identifier = "/blog/2016/07/19/GSoC-16-Port-Comment-Alter-Module-Week-8.html";
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
    <li>
      <span>08 Aug 2016 &raquo;</span> <a href="/blog/2016/08/08/GSoC-16-Port-Comment-Alter-Module-Week-11.html">GSoC'16 - Port Comment Alter Module - Week 11</a>
    </li>
    
    <li>
      <span>03 Aug 2016 &raquo;</span> <a href="/blog/2016/08/03/GSoC-16-Port-Comment-Alter-Module-Week-10.html">GSoC'16 - Port Comment Alter Module - Week 10</a>
    </li>
    
    <li>
      <span>26 Jul 2016 &raquo;</span> <a href="/blog/2016/07/26/GSoC-16-Port-Comment-Alter-Module-Week-9.html">GSoC'16 - Port Comment Alter Module - Week 9</a>
    </li>
    
  </ul>
</div>


      <div class="footer">
        <div class="disclaimer">
  

  <p>
    © Anchal, 2016 &mdash; built with <a href="http://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/swanson/lagom">Lagom theme</a>
  </p>
</div>

      </div>
    </div>
  </div>


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxx-x']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>
